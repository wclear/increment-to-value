(function(){"use strict";function getValidRunningTime(target){var runningTime=parseInt(target.getAttribute("data-run-time"));return runningTime>0?runningTime:1}function getValidStartValue(target){var startValue=parseInt(target.getAttribute("data-start-value"));if(isNaN(startValue)){return 0}else{return startValue}}function initMeta(targets){var meta=[];for(var i=0;i<targets.length;i++){var finalValueStr=targets[i].getAttribute("data-final-value"),startValueTemp=getValidStartValue(targets[i]),finalValueTemp=parseInt(finalValueStr);var metaObj={startValue:startValueTemp,finalValueStrLength:finalValueStr.length,finalValue:finalValueTemp,runningTime:getValidRunningTime(targets[i]),reverse:startValueTemp>finalValueTemp,range:startValueTemp-finalValueTemp,completed:false,target:targets[i]};meta.push(metaObj);targets[i].childNodes[0].textContent=metaObj.startValue}return meta}var frameTime=19,startTime=+new Date,targets=document.querySelectorAll(".increment-to-value"),targetsMeta=initMeta(targets),pads=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000"];var timerId=window.setInterval(function(){var finishedCount=0;for(var i=targetsMeta.length-1;i>=0;i--){if(targetsMeta[i].completed){continue}var percentage=(+new Date-startTime)/targetsMeta[i].runningTime,newValue=parseInt(targetsMeta[i].startValue-percentage*targetsMeta[i].range);if(targetsMeta[i].reverse&&newValue<=targetsMeta[i].finalValue||!targetsMeta[i].reverse&&newValue>=targetsMeta[i].finalValue){newValue=targetsMeta[i].finalValue;targetsMeta[i].completed=true;++finishedCount}if(targetsMeta[i].reverse){targetsMeta[i].target.childNodes[0].textContent=newValue.toLocaleString()}else{var newText=parseInt("1"+pads[targetsMeta[i].finalValueStrLength-(newValue+"").length]+newValue).toLocaleString();targetsMeta[i].target.childNodes[0].textContent=newText.indexOf(",")===1?newText.substring(2):newText.substring(1)}}if(finishedCount===targetsMeta.length){window.clearInterval(timerId)}},frameTime)})();
